<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Bitcoin (By Malague√±o)</title>
    
    <style>
        /* --- CSS Integrado --- */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Inter', -apple-system, BlinkMacMacFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #e0f2f7 0%, #cce7f0 100%);
            color: #2c3e50;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-y: auto; /* Permite desplazamiento vertical si el contenido es m√°s grande */
            overflow-x: hidden; /* Evita el desplazamiento horizontal */
            min-height: 100vh; /* Asegura que el body ocupe al menos toda la altura de la vista */
            padding: 20px; /* A√±adir padding al body para evitar que el contenedor toque los bordes */
            box-sizing: border-box; /* Incluye padding en el tama√±o total */
        }

        .container {
            width: 100%;
            max-width: 450px; /* Ligeramente m√°s ancho para mejor simetr√≠a */
            min-height: 620px; /* Altura m√≠nima para asegurar espacio */
            padding: 30px; /* Aumento de padding para m√°s espacio interno */
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Distribuye el espacio entre secciones */
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15), 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.6);
            animation: fadeIn 0.8s ease-out;
            margin: auto; /* Centra el contenedor horizontalmente */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #1a5276;
            text-align: center;
            margin-bottom: 35px; /* M√°s margen inferior */
            font-size: 2.8rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding-bottom: 12px; /* M√°s padding inferior */
            border-bottom: 3px solid #d4e6f1;
            letter-spacing: -0.5px;
        }

        h1 img { /* Estilo para la imagen del logo de Bitcoin */
            width: 1.2em; /* Tama√±o relativo al tama√±o de la fuente del h1 */
            height: 1.2em;
            vertical-align: middle;
            margin-right: 5px; /* Espacio entre el logo y el texto */
        }

        h2 {
            color: #2e86c1;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .input-group {
            margin-bottom: 22px; /* M√°s margen inferior para separar grupos */
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 1.05rem; /* Ligeramente m√°s grande */
            color: #5d6d7e;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px; /* M√°s espacio para el icono */
        }

        .input-group input {
            width: 100%;
            padding: 14px 18px; /* M√°s padding */
            border: 2px solid #aed6f1;
            border-radius: 12px; /* Bordes m√°s redondeados */
            background-color: #f8fcfd;
            color: #333333;
            font-size: 1.25rem; /* Tama√±o de fuente m√°s grande */
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.3);
            background-color: #ffffff;
        }

        /* Oculta las flechas de los inputs num√©ricos */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }

        input[type=number] {
          -moz-appearance: textfield;
        }

        .projection-section {
            border-top: 1px solid #d4e6f1;
            padding-top: 30px; /* M√°s padding superior */
            margin-top: 25px; /* M√°s margen superior */
        }

        .current-value p, .future-value label {
            font-size: 1.05rem;
            color: #5d6d7e;
            font-weight: 600;
            margin-bottom: 10px; /* Espacio para el valor */
        }

        h3 {
            margin-top: 10px;
            font-size: 1.7rem; /* Tama√±o de fuente m√°s grande */
            color: #1a5276;
            display: flex;
            align-items: center;
            gap: 10px; /* M√°s espacio para el icono */
            font-weight: 700;
            margin-bottom: 20px; /* Espacio antes del siguiente elemento */
        }

        #future-price-input {
            width: 100%;
            padding: 14px 18px;
            border-radius: 12px;
            background-color: #f8fcfd;
            color: #333333;
            font-size: 1.25rem;
            border: 2px solid #aed6f1;
            margin-top: 10px;
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
        }

        #future-price-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.3);
            background-color: #ffffff;
        }

        .currency-value {
            color: #27ae60;
            font-weight: bold;
            font-size: 1.7rem; /* Tama√±o de fuente m√°s grande para los valores */
        }

        #currency-toggle-btn {
            padding: 12px 20px; /* M√°s padding */
            border: none;
            border-radius: 10px; /* Bordes m√°s redondeados */
            background-color: #3498db;
            color: white;
            cursor: pointer;
            font-size: 1rem; /* Tama√±o de fuente ligeramente m√°s grande */
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.1s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
            min-width: 120px; /* Ancho m√≠nimo para el bot√≥n */
        }

        #currency-toggle-btn:hover {
            background-color: #217dbb;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(52, 152, 219, 0.4);
        }

        #currency-toggle-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(52, 152, 219, 0.2);
        }

        /* Iconos (usando emojis para simplicidad y compatibilidad) */
        .icon {
            font-size: 1.2em;
            vertical-align: middle;
            margin-right: 5px;
        }

        /* Estilo para los valores de proyecci√≥n */
        .value-display {
            display: flex;
            justify-content: space-between;
            align-items: baseline; /* Alinea el texto base de los valores */
            margin-bottom: 15px; /* Espacio entre las l√≠neas de valor */
        }

        .value-display p {
            margin: 0; /* Elimina el margen predeterminado del p√°rrafo */
        }

        /* Secci√≥n de frases de humor */
        .humor-section {
            border-top: 1px solid #d4e6f1;
            padding-top: 25px;
            margin-top: 30px; /* M√°s margen superior para separarlo */
            text-align: center;
            font-size: 0.95rem;
            color: #607d8b; /* Un gris azulado para el texto */
            font-style: italic;
            min-height: 60px; /* Altura m√≠nima para evitar saltos de dise√±o */
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f0f8ff; /* Fondo muy claro para la secci√≥n */
            border-radius: 10px;
            padding: 15px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05); /* Sombra interna sutil */
        }

        /* Media Queries para Responsividad */
        @media (max-width: 500px) {
            body {
                padding: 15px; /* Menos padding en pantallas muy peque√±as */
            }
            .container {
                padding: 25px;
                border-radius: 15px;
                min-height: unset;
                height: auto;
                margin: 0; /* Elimina el margen auto para usar el padding del body */
            }
            h1 {
                font-size: 2.2rem;
                margin-bottom: 25px;
            }
            h1 img {
                width: 1.1em;
                height: 1.1em;
            }
            h2 {
                font-size: 1.6rem;
                margin-bottom: 20px;
            }
            .input-group input {
                font-size: 1.1rem;
                padding: 12px 15px;
            }
            h3 {
                font-size: 1.5rem;
            }
            .currency-value {
                font-size: 1.5rem;
            }
            #currency-toggle-btn {
                font-size: 0.9rem;
                padding: 10px 18px;
                min-width: unset; /* Elimina el ancho m√≠nimo en m√≥viles */
            }
            .projection-section {
                padding-top: 25px;
                margin-top: 20px;
            }
            .humor-section {
                padding: 12px;
                font-size: 0.85rem;
                min-height: 50px;
            }
        }

        @media (max-width: 380px) {
            h1 {
                font-size: 2rem;
            }
            h1 img {
                width: 1em;
                height: 1em;
            }
            h2 {
                font-size: 1.4rem;
            }
            .input-group input {
                font-size: 1rem;
                padding: 10px 12px;
            }
            h3 {
                font-size: 1.3rem;
            }
            .currency-value {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bitcoin.svg/1200px-Bitcoin.svg.png" 
                 alt="Logo de Bitcoin" 
                 onerror="this.onerror=null;this.src='https://placehold.co/40x40/f7931a/ffffff?text=‚Çø'">
            Calculadora Bitcoin
        </h1>

        <!-- Secci√≥n Superior: Conversor -->
        <div class="converter-section">
            <h2>Conversor BTC <span class="icon">üîÑ</span> Satoshi</h2>
            <div class="input-group">
                <label for="btc-input">BTC <span class="icon">ü™ô</span></label>
                <input type="number" id="btc-input" placeholder="0.0">
            </div>
            <div class="input-group">
                <label for="satoshi-input">Satoshis <span class="icon">‚ú®</span></label>
                <input type="text" id="satoshi-input" placeholder="0">
            </div>
        </div>

        <!-- Secci√≥n Inferior: Proyecci√≥n -->
        <div class="projection-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <h2>Proyecci√≥n de Inversi√≥n <span class="icon">üìà</span></h2>
                <button id="currency-toggle-btn">Cambiar a USD</button>
            </div>
            
            <div class="value-display">
                <p>Hoy (<span id="current-date"></span>):</p>
                <span id="current-price" class="currency-value"></span>
            </div>
            
            <div class="value-display">
                <h3>Valor Actual:</h3>
                <span id="wallet-value" class="currency-value">0.00</span>
            </div>

            <div class="input-group">
                <label for="future-price-input">Si 1 BTC alcanza:</label>
                <input type="number" id="future-price-input" list="future-price-datalist" placeholder="Introduce una cifra o selecciona" value="">
                <datalist id="future-price-datalist"></datalist>
            </div>

            <div class="value-display">
                <h3>Valor Futuro:</h3>
                <span id="future-wallet-value" class="currency-value">0.00</span>
            </div>
        </div>

        <!-- Secci√≥n de Frases de Humor -->
        <div class="humor-section">
            <p id="humor-phrase"></p>
        </div>
    </div>

    <script>
        // --- JavaScript Integrado ---
        document.addEventListener('DOMContentLoaded', () => {
            // --- CONSTANTES Y VARIABLES ---
            const SATOSHIS_PER_BTC = 100_000_000;
            // Para una aplicaci√≥n real, este valor debe obtenerse de una API.
            const CURRENT_BTC_PRICE_USD = 122175; // Precio de ejemplo en USD
            const USD_TO_EUR_RATE = 0.92; // Aproximadamente 1 USD = 0.92 EUR (Julio 2025)

            let currentCurrency = 'EUR'; // Default currency changed to EUR

            const btcInput = document.getElementById('btc-input');
            const satoshiInput = document.getElementById('satoshi-input');
            const currentDateSpan = document.getElementById('current-date');
            const currentPriceSpan = document.getElementById('current-price');
            const walletValueSpan = document.getElementById('wallet-value');
            const futurePriceInput = document.getElementById('future-price-input'); 
            const futurePriceDatalist = document.getElementById('future-price-datalist'); // Reference to datalist
            const futureWalletValueSpan = document.getElementById('future-wallet-value');
            const currencyToggleButton = document.getElementById('currency-toggle-btn');
            const humorPhraseElement = document.getElementById('humor-phrase'); // Element to display humor phrases

            // Predefined future prices in USD
            const predefinedFuturePricesUSD = [
                100000, 150000, 200000, 250000, 300000,
                400000, 500000, 750000, 1000000, 2000000
            ];

            // Humorous phrases comparing real estate and Bitcoin (up to 20)
            const humorPhrases = [
                "Mi cu√±ado dice que el ladrillo nunca baja. Bitcoin le respondi√≥: 'Suj√©tame el caf√©'.",
                "Con Bitcoin, si pierdes dinero, al menos no tienes que reformar el ba√±o para venderlo.",
                "Invertir en inmuebles: '¬øQui√©n ha roto el plato?'. Invertir en Bitcoin: '¬øQui√©n ha roto la barrera de los 100k?'.",
                "Mi abuela dice que el piso es seguro. Bitcoin le manda un saludo desde la luna.",
                "Para vender un piso, papeleo. Para vender Bitcoin, un click. ¬øQui√©n dijo que la vida era dif√≠cil?",
                "El alquiler de un piso te da dolores de cabeza. Bitcoin te da infartos de alegr√≠a (o de susto).",
                "Con Bitcoin, no hay derramas. Solo 'p√©rdidas moment√°neas de valor'.",
                "Mi vecino compr√≥ un piso en la playa. Yo compr√© Bitcoin y ahora la playa viene a m√≠ (en un yate).",
                "El mercado inmobiliario es lento. Bitcoin es como un cohete sin paraca√≠das.",
                "Si el inquilino no paga, llamas a la polic√≠a. Si Bitcoin baja, llamas a tu terapeuta.",
                "Un piso te da un techo. Bitcoin te da la posibilidad de comprar un edificio entero (o una tienda de campa√±a).",
                "La rentabilidad de mi piso es del 3%. La de Bitcoin... bueno, a veces es del 300% y otras del -80%. ¬°Emoci√≥n garantizada!",
                "Con el Bitcoin, no tienes que lidiar con goteras, solo con 'correcciones de mercado'.",
                "El valor de tu casa lo decide el barrio. El de Bitcoin, el universo (y Elon Musk).",
                "Mi cu√±ado presume de su chalet. Yo de mis satoshis, que caben en un USB y valen m√°s.",
                "Para vender tu casa necesitas un agente. Para vender Bitcoin, solo necesitas nervios de acero.",
                "El esfuerzo de gestionar un alquiler vs. el esfuerzo de no mirar el precio de Bitcoin cada 5 minutos.",
                "El ladrillo es para los que tienen paciencia. Bitcoin es para los que tienen un desfibrilador cerca.",
                "Con el Bitcoin, no hay comunidad de vecinos que te juzgue. Solo una comunidad global que te anima (o te hace 'hodl').",
                "Mi padre dice: 'Invierte en algo que puedas tocar'. Yo le digo: 'Pap√°, ¬øhas tocado alguna vez un mill√≥n de euros?'"
            ];


            // --- FUNCIONES ---

            // Formatear n√∫meros para una mejor lectura (separadores de miles)
            const formatNumber = (num) => new Intl.NumberFormat('es-ES').format(num);

            // Formatear valores monetarios seg√∫n la moneda actual
            const formatValue = (num, currency) => {
                if (currency === 'USD') {
                    return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(num);
                } else if (currency === 'EUR') {
                    return new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(num);
                }
                return num; // Fallback
            };

            // Actualizar todos los valores monetarios en la UI
            function updateCurrencyDisplays() {
                let displayPrice = CURRENT_BTC_PRICE_USD;
                if (currentCurrency === 'EUR') {
                    displayPrice = CURRENT_BTC_PRICE_USD * USD_TO_EUR_RATE;
                    currencyToggleButton.textContent = 'Cambiar a USD'; // Update button text
                } else {
                    currencyToggleButton.textContent = 'Cambiar a EUR'; // Update button text
                }
                currentPriceSpan.textContent = formatValue(displayPrice, currentCurrency);

                const btcValue = parseFloat(btcInput.value) || 0;
                const currentWalletValue = btcValue * displayPrice;
                walletValueSpan.textContent = formatValue(currentWalletValue, currentCurrency);

                // Clear and re-populate datalist options with current currency formatting
                futurePriceDatalist.innerHTML = ''; // Clear existing options
                predefinedFuturePricesUSD.forEach(priceUSD => {
                    const option = document.createElement('option');
                    option.value = priceUSD; // Store USD value for calculation
                    
                    // Display formatted value in the dropdown
                    let displayPriceOption = priceUSD;
                    if (currentCurrency === 'EUR') {
                        displayPriceOption = priceUSD * USD_TO_EUR_RATE;
                    }
                    option.label = formatValue(displayPriceOption, currentCurrency); // Use label for display
                    
                    futurePriceDatalist.appendChild(option);
                });

                // Get value directly from the input field for calculation
                const futurePriceUSD = parseFloat(futurePriceInput.value) || 0; 
                let futurePriceInCurrentCurrency = futurePriceUSD;
                if (currentCurrency === 'EUR') {
                    futurePriceInCurrentCurrency = futurePriceUSD * USD_TO_EUR_RATE;
                }
                const futureWalletValue = btcValue * futurePriceInCurrentCurrency;
                futureWalletValueSpan.textContent = formatValue(futureWalletValue, currentCurrency);
            }

            // Actualizar valores de BTC/Satoshi y luego los monetarios
            function updateValues(origin) {
                let btcValue = 0;
                const cleanSatoshiValue = satoshiInput.value.replace(/\./g, '');

                if (origin === 'btc') {
                    btcValue = parseFloat(btcInput.value) || 0;
                    if (btcValue > 0) {
                        satoshiInput.value = formatNumber(Math.round(btcValue * SATOSHIS_PER_BTC));
                    } else {
                        satoshiInput.value = '';
                    }
                } else if (origin === 'satoshi') {
                    const satoshiValue = parseFloat(cleanSatoshiValue) || 0;
                    if (satoshiValue > 0) {
                        btcValue = satoshiValue / SATOSHIS_PER_BTC;
                        btcInput.value = btcValue.toFixed(8);
                    } else {
                        btcInput.value = '';
                    }
                } else {
                     btcValue = parseFloat(btcInput.value) || 0;
                }

                updateCurrencyDisplays();
            }

            // Funci√≥n para mostrar una frase de humor aleatoria
            function displayRandomHumorPhrase() {
                const randomIndex = Math.floor(Math.random() * humorPhrases.length);
                humorPhraseElement.textContent = humorPhrases[randomIndex];
            }

            // --- INICIALIZACI√ìN Y EVENT LISTENERS ---

            currentDateSpan.textContent = new Date().toLocaleDateString('es-ES');
            
            btcInput.addEventListener('input', () => updateValues('btc'));
            
            satoshiInput.addEventListener('input', (e) => {
                let value = e.target.value.replace(/\D/g, '');
                e.target.value = formatNumber(value);
                updateValues('satoshi');
            });
            
            futurePriceInput.addEventListener('input', () => updateValues('futurePrice')); // Listen for input changes
            
            currencyToggleButton.addEventListener('click', () => {
                if (currentCurrency === 'USD') {
                    currentCurrency = 'EUR';
                } else {
                    currentCurrency = 'USD';
                }
                updateCurrencyDisplays();
            });

            // Initial call to set the UI state
            updateValues('none'); 
            displayRandomHumorPhrase(); // Display a random phrase on load
        });
    </script>
</body>
</html>
