<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F7ZX8KKJDR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-F7ZX8KKJDR');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iván busca hogar en la costa</title>
    <!-- Google Fonts para tipografía: Montserrat (títulos) y Open Sans (cuerpo) -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /*
        ---------------------------------------------------------
        1. ESTILOS GENERALES Y VARIABLES CSS
        ---------------------------------------------------------
        */
        :root {
            /* Colores */
            --color-primary-blue: hsl(200, 70%, 65%); /* Azul suave del mar */
            --color-secondary-blue: hsl(200, 60%, 75%); /* Azul más claro para acentos */
            --color-sand: hsl(40, 30%, 96%); /* Arena/beige muy claro para fondos */
            --color-beige: hsl(40, 20%, 92%); /* Beige base del fondo de la página */
            --color-accent-terracota: hsl(20, 60%, 55%); /* Terracota para botones y acentos cálidos */
            --color-accent-terracota-dark: hsl(20, 70%, 45%); /* Terracota más oscuro para hover */
            --color-text-dark: hsl(0, 0%, 25%); /* Gris oscuro para el texto principal */
            --color-text-light: hsl(0, 0%, 98%); /* Casi blanco para texto sobre fondos oscuros */
            --color-border: hsl(0, 0%, 85%); /* Gris claro para bordes */

            /* Tipografía */
            --font-heading: 'Montserrat', sans-serif;
            --font-body: 'Open Sans', sans-serif;

            /* Variables RGB para sombras con alpha (compatibilidad) */
            --color-primary-blue-rgb: 77, 182, 204;
            --color-accent-terracota-rgb: 217, 107, 77;
        }

        /* Reset Básico de CSS */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth; /* Desplazamiento suave */
        }

        body {
            font-family: var(--font-body);
            line-height: 1.6;
            color: var(--color-text-dark);
            background-color: var(--color-beige);
            min-height: 100vh; /* Ocupa al menos el alto de la ventana */
            display: flex;
            flex-direction: column; /* Para que el footer se quede abajo */
        }

        /* Contenedor principal para centrar el contenido */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            width: 100%; /* Asegura que ocupe todo el ancho disponible en móvil */
        }

        /*
        ---------------------------------------------------------
        2. CABECERA (HEADER)
        ---------------------------------------------------------
        */
        header {
            background: linear-gradient(135deg, var(--color-primary-blue), var(--color-secondary-blue));
            color: var(--color-text-light);
            padding: 15px 15px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
            border-bottom: 2px solid var(--color-accent-terracota);
            box-shadow: 0 1px 8px rgba(0, 0, 0, 0.08);
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        


        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29-22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM60 91c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.8;
            z-index: 0;
        }

        header .container {
            position: relative;
            z-index: 1;
        }

        header h1 {
            font-family: var(--font-heading);
            font-size: clamp(1.6rem, 4.5vw, 2.8rem);
            margin: 0 0 6px 0;
            letter-spacing: 0.2px;
            font-weight: 700;
            line-height: 1;
            position: relative;
            display: inline-block;
            color: var(--color-text-light);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            padding: 0 12px;
            background: none;
            -webkit-text-fill-color: initial;
        }

        header h1::before,
        header h1::after {
            content: '~';
            color: var(--color-accent-terracota);
            font-weight: 400;
            margin: 0 10px;
            opacity: 0.8;
        }

        header p.subtitle {
            font-family: var(--font-heading);
            font-size: clamp(0.9rem, 1.8vw, 1.1rem);
            margin: 10px auto 0;
            max-width: 700px;
            font-weight: 400;
            line-height: 1.2;
            color: #fff8e6;
            background: rgba(0, 0, 0, 0.15);
            display: inline-block;
            padding: 5px 16px;
            border-radius: 15px;
            box-shadow: 0 1px 6px rgba(0, 0, 0, 0.08);
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(3px);
        }

        /*
        ---------------------------------------------------------
        3. SECCIÓN DE PRESENTACIÓN (MAIN CONTENT)
        ---------------------------------------------------------
        */
        main {
            flex-grow: 1; /* Permite que el contenido principal ocupe el espacio restante */
            padding-top: 30px; /* Espacio desde la cabecera */
        }

        .section-presentation, .section-form {
            background-color: var(--color-sand);
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--color-border);
        }

        .section-presentation h2, .section-form h2, .section-form h3 {
            font-family: var(--font-heading);
            color: var(--color-primary-blue);
            text-align: center;
            margin-bottom: 25px;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
        }
        .section-form h3 {
            font-size: clamp(1.4rem, 3vw, 2rem);
            margin-bottom: 20px;
        }

        /* Imagen de presentación */
        .presentation-image {
            display: block;
            max-width: 100%;
            width: 650px; /* Ancho máximo para pantallas grandes */
            height: auto;
            margin: 0 auto 30px auto; /* Centrar y añadir margen inferior */
            border-radius: 15px; /* Bordes redondeados */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); /* Sombra suave */
            border: 4px solid var(--color-secondary-blue); /* Borde que enmarca la imagen */
            object-fit: cover; /* Asegura que la imagen cubra el área sin distorsionarse */
            object-position: center; /* Centra el contenido de la imagen */
        }

        /* Texto de presentación */
        .presentation-text p {
            margin-bottom: 15px;
            text-align: center;
            font-size: clamp(0.95rem, 2vw, 1.1rem);
            line-height: 1.8;
            color: var(--color-text-dark);
            max-width: 700px; /* Ancho máximo para legibilidad */
            margin-left: auto;
            margin-right: auto; /* Centrar párrafos */
        }

        .presentation-text strong {
            color: var(--color-accent-terracota); /* Resaltar el texto de fechas */
            font-weight: 700;
        }

        /*
        ---------------------------------------------------------
        4. SECCIÓN DEL FORMULARIO (FORM)
        ---------------------------------------------------------
        */
        .form-grid {
            display: grid;
            gap: 20px; /* Espacio entre los campos */
            grid-template-columns: 1fr; /* Una columna por defecto en móviles */
        }

        /* Diseño de 2 columnas para pantallas medianas */
        @media (min-width: 600px) {
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Dos columnas */
            }
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--color-primary-blue);
            font-size: 0.95rem;
        }

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="tel"],
        .form-group input[type="url"],
        .form-group input[type="date"],
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-size: 1rem;
            color: var(--color-text-dark);
            background-color: white;
            transition: border-color 0.3s ease, box-shadow 0.3s ease; /* Transición suave en foco */
        }

        .form-group input:focus,
        .form-group textarea:focus {
            border-color: var(--color-accent-terracota);
            box-shadow: 0 0 0 3px rgba(var(--color-accent-terracota-rgb), 0.2); /* Sombra de foco */
            outline: none; /* Quitar contorno por defecto del navegador */
        }

        textarea {
            resize: vertical; /* Permitir redimensionar solo verticalmente */
            min-height: 100px;
        }

        /* Grupo de Checkboxes (Características del Piso) */
        .checkbox-group {
            grid-column: 1 / -1; /* Ocupa todas las columnas del grid */
            display: flex;
            flex-wrap: wrap; /* Envuelve los elementos si no caben */
            gap: 15px; /* Espacio entre checkboxes */
            margin-bottom: 20px;
            justify-content: center; /* Centrar los checkboxes */
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-weight: 400;
            color: var(--color-text-dark);
            background-color: white;
            padding: 10px 15px;
            border-radius: 20px; /* Bordes muy redondeados */
            border: 1px solid var(--color-border);
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 8px;
            transform: scale(1.2); /* Checkbox ligeramente más grande */
            accent-color: var(--color-primary-blue); /* Color del checkbox moderno */
        }

        .checkbox-group input[type="checkbox"]:checked + span {
            color: var(--color-text-light); /* Texto blanco cuando está marcado */
            font-weight: 600;
        }
        .checkbox-group label:has(input[type="checkbox"]:checked) {
            background-color: var(--color-primary-blue); /* Fondo azul cuando marcado */
            border-color: var(--color-primary-blue);
            color: var(--color-text-light);
        }
        .checkbox-group label:hover {
            background-color: var(--color-secondary-blue); /* Efecto hover */
            border-color: var(--color-primary-blue);
        }

        /* Mensajes de formulario */
        #formMessage {
            grid-column: 1 / -1;
            padding: 0px;
            margin-top: 20px;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
            transition: opacity 0.5s ease-in-out, padding 0.5s ease-in-out;
            opacity: 0;
            height: auto;
            overflow: hidden;
            max-height: 0; /* Para la transición de altura */
        }
        #formMessage.show {
            opacity: 1;
            padding: 15px;
            max-height: 100px; /* Ajusta si el contenido es más largo */
        }
        #formMessage.success {
            background-color: hsl(120, 40%, 90%);
            color: hsl(120, 60%, 30%);
            border: 1px solid hsl(120, 50%, 80%);
        }
        #formMessage.error {
            background-color: hsl(0, 70%, 90%);
            color: hsl(0, 80%, 40%);
            border: 1px solid hsl(0, 80%, 80%);
        }

        /* Botón de Envío */
        .submit-button {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 20px;
        }
        button[type="submit"] {
            background-color: var(--color-accent-terracota);
            color: var(--color-text-light);
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 6px 12px rgba(var(--color-accent-terracota-rgb), 0.3);
        }

        button[type="submit"]:hover {
            background-color: var(--color-accent-terracota-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(var(--color-accent-terracota-rgb), 0.4);
        }
        button[type="submit"]:active {
            transform: translateY(0);
            box-shadow: 0 4px 8px rgba(var(--color-accent-terracota-rgb), 0.2);
        }
        button[type="submit"]:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }


        /*
        ---------------------------------------------------------
        5. PIE DE PÁGINA (FOOTER)
        ---------------------------------------------------------
        */
        footer {
            background-color: var(--color-primary-blue);
            color: var(--color-text-light);
            text-align: center;
            padding: 25px 20px;
            margin-top: 50px;
            box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.1);
        }

        footer p {
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        footer a {
            color: var(--color-text-light);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
            /* Estilos para el enlace de Telegram con icono */
            display: inline-flex; /* Para alinear el icono y el texto */
            align-items: center; /* Alinear verticalmente */
            gap: 8px; /* Espacio entre icono y texto */
        }

        footer a:hover {
            color: var(--color-accent-terracota); /* Cambio de color en hover */
        }

        /* Estilos para el icono SVG de Telegram */
        .telegram-icon {
            width: 24px; /* Tamaño del icono */
            height: 24px;
            fill: currentColor; /* El icono tomará el color del texto del enlace */
            transition: fill 0.3s ease; /* Transición suave para el color del icono */
        }

        /* Asegurarse de que el color del icono cambie al hacer hover en el enlace */
        footer a:hover .telegram-icon {
            fill: var(--color-accent-terracota);
        }


        /*
        ---------------------------------------------------------
        6. AJUSTES RESPONSIVOS (MEDIA QUERIES)
        ---------------------------------------------------------
        */
        @media (max-width: 768px) {
            .section-presentation, .section-form {
                padding: 20px;
            }

            header h1 {
                font-size: clamp(1.8rem, 8vw, 2.5rem);
            }

            .presentation-image {
                margin-bottom: 20px;
            }

            .presentation-text p {
                font-size: 0.9rem;
                margin-bottom: 10px;
            }

            .form-grid {
                gap: 15px;
            }

            .form-group input, .form-group textarea {
                padding: 10px;
                font-size: 0.95rem;
            }

            button[type="submit"] {
                padding: 12px 25px;
                font-size: 1.1rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            header {
                padding: 30px 15px;
            }
            .section-presentation h2, .section-form h2, .section-form h3 {
                margin-bottom: 15px;
            }
            /* Los checkboxes se apilan verticalmente en pantallas muy pequeñas */
            .checkbox-group {
                flex-direction: column;
                align-items: flex-start;
            }
            .checkbox-group label {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Iván:<br>El inquilino perfecto</h1>
            <p class="subtitle">Tu casa en las mejores manos</p>
        </div>
    </header>

    <main class="container">
        <section class="section-presentation">
            <!-- La imagen ahora apunta a yo.png en la misma carpeta -->
            <img src="yo.png"
                 alt="Niño rubio de 5 años sonriendo en una playa al atardecer, con estética de foto analógica de 1988, que evoca seguridad y calidez."
                 class="presentation-image">

            <div class="presentation-text">
                <h2>Hay pasiones que nos definen...</h2>
                <p>Hay pasiones que nos definen, y para mí, esa es el mar. Desde mi infancia, su inmensidad ha marcado mi vida, y ahora, busco ese hogar temporal en la costa que me permita reconectar con su energía vital.</p>
                <p>Mi nombre es Iván, soy un ingeniero de 40 años, serio y con la solvencia necesaria. Te ofrezco mi compromiso inquebrantable: tu piso será cuidado con el respeto y el cariño que merece, mientras yo disfruto de la brisa marina entre <strong>septiembre y junio</strong>.</p>
                <p>Valoro la transparencia y estoy abierto a negociar un precio justo para una relación beneficiosa para ambos. Si el alquiler pudiera extenderse a los meses de verano, ¡estaría encantado! Tu hogar estará perfectamente cuidado incluso en tu ausencia, brindándote total tranquilidad. Confía tu hogar a alguien que lo valorará tanto como tú.</p>
            </div>
        </section>

        <section class="section-form">
            <h2>Si tienes un piso que encaja con lo que busco, ¡no dudes en escribirme!</h2>

            <!--
                IMPORTANTE: Reemplaza "YOUR_FORMSPREE_URL" con la URL de tu formulario de Formspree.
                Ejemplo: https://formspree.io/f/abcdefg
            -->
            <form id="proposalForm" action="https://formspree.io/f/xvgajrko" method="POST">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">Nombre <span style="color:var(--color-accent-terracota)">*</span></label>
                        <input type="text" id="name" name="Nombre" required placeholder="Tu nombre">
                    </div>
                    <div class="form-group">
                        <label for="email">Correo Electrónico</label>
                        <input type="email" id="email" name="Email" placeholder="ejemplo@dominio.com">
                    </div>
                    <div class="form-group">
                        <label for="phone">Teléfono</label>
                        <input type="tel" id="phone" name="Telefono" placeholder="+34 123 456 789">
                    </div>
                    <div class="form-group">
                        <label for="adLink">Enlace al Anuncio (si lo tienes)</label>
                        <input type="url" id="adLink" name="Enlace_Anuncio" placeholder="https://tuweb.com/anuncio-del-piso">
                    </div>
                    <div class="form-group">
                        <label for="exactAddress">Dirección Aproximada (opcional)</label>
                        <input type="text" id="exactAddress" name="Direccion_Exacta" placeholder="Calle, número, CP, ciudad, provincia">
                    </div>
                    <div class="form-group">
                        <label for="availabilityFrom">Disponible Desde</label>
                        <input type="date" id="availabilityFrom" name="Disponibilidad_Desde">
                    </div>
                    <div class="form-group">
                        <label for="availabilityTo">Disponible Hasta</label>
                        <input type="date" id="availabilityTo" name="Disponibilidad_Hasta">
                    </div>
                </div>

                <div class="form-group">
                    <label>Características del Piso:</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" name="Caracteristicas[]" value="Vistas al mar">
                            <span>Vistas al mar</span>
                        </label>
                        <label>
                            <input type="checkbox" name="Caracteristicas[]" value="Garaje">
                            <span>Garaje</span>
                        </label>
                        <label>
                            <input type="checkbox" name="Caracteristicas[]" value="Piscina">
                            <span>Piscina</span>
                        </label>
                        <label>
                            <input type="checkbox" name="Caracteristicas[]" value="Amueblado">
                            <span>Amueblado</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="comments">Otros comentarios:</label>
                    <textarea id="comments" name="Comentarios" placeholder="Añade cualquier detalle adicional sobre el piso (caracteristicas, habitaciones, baños, etc.) o tu oferta (precio deseado, etc.)..."></textarea>
                </div>

                <!-- Mensaje de estado del formulario -->
                <div id="formMessage"></div>

                <div class="submit-button">
                    <button type="submit" id="submitBtn">Enviar Propuesta</button>
                </div>
            </form>
        </section>
    </main>

    <footer>
        <p>¡Gracias por tu interés!</p>
        <p>
            <a href="https://t.me/Opcionale" target="_blank">
                <!-- Icono SVG de Telegram -->
                <svg class="telegram-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.3 8.35L8.5 15.1c-.2.2-.4.2-.6 0l-2.4-1.8c-.2-.15-.4-.15-.6-.05l-2.5 1.7c-.2.15-.3.15-.3.05V10.2c0-.1.05-.2.15-.25L15 6.3c.2-.15.4-.1.6 0l.7.35c.1.05.15.15.15.25v.1c0 .05-.05.1-.1.15z"/>
                </svg>
                <span>Escríbeme por Telegram</span>
            </a>
        </p>
    </footer>

    <script>
        /*
        ---------------------------------------------------------
        JAVASCRIPT
        ---------------------------------------------------------
        */
        document.addEventListener('DOMContentLoaded', () => {

            const proposalForm = document.getElementById('proposalForm');
            const submitBtn = document.getElementById('submitBtn');
            const formMessage = document.getElementById('formMessage');

            function showFormMessage(message, type = 'info', timeout = 5000) {
                formMessage.textContent = message;
                formMessage.className = '';
                formMessage.classList.add('show', type);

                if (timeout > 0) {
                    setTimeout(() => {
                        formMessage.classList.remove('show');
                        setTimeout(() => {
                            formMessage.textContent = '';
                            formMessage.className = '';
                        }, 500);
                    }, timeout);
                }
            }

            proposalForm.addEventListener('submit', async function(event) {
                event.preventDefault();

                formMessage.classList.remove('show', 'success', 'error');
                formMessage.textContent = '';

                submitBtn.disabled = true;
                submitBtn.textContent = 'Enviando...';

                const formData = new FormData(this);

                try {
                    const response = await fetch(proposalForm.action, {
                        method: proposalForm.method,
                        body: formData,
                        headers: {
                            'Accept': 'application/json' // Crucial para obtener respuesta JSON de Formspree
                        }
                    });

                    if (response.ok) {
                        showFormMessage('¡Propuesta enviada con éxito! Te responderé pronto.', 'success');
                        proposalForm.reset();
                    } else {
                        // El servidor respondió con un código de error (por ejemplo, 400, 422, 500)
                        let errorMessage = `Error ${response.status}: Ha ocurrido un problema al enviar la propuesta.`;
                        let isVerificationOrClientError = false;

                        // Verifica si la respuesta es JSON antes de intentar parsearla
                        const contentType = response.headers.get('content-type');
                        if (contentType && contentType.includes('application/json')) {
                            try {
                                const data = await response.json();
                                if (data.errors && data.errors.length > 0) {
                                    errorMessage = data.errors.map(err => err.message).join('; ');
                                } else if (data.message) {
                                    errorMessage = data.message;
                                }
                                if (response.status === 400 || response.status === 422) {
                                    isVerificationOrClientError = true;
                                }
                            } catch (jsonParseError) {
                                console.warn('Formspree JSON parsing failed or unexpected structure:', jsonParseError, response);
                                errorMessage = `Error ${response.status}: El servidor respondió con un error, pero el mensaje JSON no pudo ser leído.`;
                            }
                        } else {
                            const responseText = await response.text();
                            console.warn('Formspree responded with non-JSON content (unexpected). Response text:', responseText);
                            errorMessage = `Error ${response.status}: El servidor devolvió una respuesta inesperada.`;
                            if (response.status === 400 || response.status === 422) {
                                isVerificationOrClientError = true;
                            }
                        }

                        if (isVerificationOrClientError) {
                            errorMessage += ' Si es tu primera vez enviando, por favor, revisa tu email de Formspree para verificar la cuenta. *La propuesta puede haber llegado al correo de Iván a pesar de este mensaje.*';
                        } else {
                            errorMessage += ' Por favor, revisa los datos e inténtalo de nuevo.';
                        }

                        showFormMessage(errorMessage, 'error', 0);
                    }
                } catch (networkError) {
                    showFormMessage('Parece que hay un problema de conexión. Por favor, revisa tu internet e inténtalo de nuevo.', 'error', 0);
                    console.error('Error de red al enviar el formulario:', networkError);
                } finally {
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Enviar Propuesta';
                }
            });
        });
    </script>
</body>
</html>